<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUBOSEGURO - App Pasajero</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Estilos espec√≠ficos para app pasajero */
        .passenger-container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .passenger-header {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            color: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            margin-bottom: 25px;
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        }
        
        .passenger-header h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .status-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: inline-block;
            margin-top: 10px;
        }
        
        .info-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }
        
        .info-item {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        
        .info-item:last-child {
            border-bottom: none;
        }
        
        .info-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e8f5e9;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: #4CAF50;
            margin-right: 15px;
        }
        
        .info-content h4 {
            color: #1a237e;
            font-size: 1rem;
            margin-bottom: 5px;
        }
        
        .info-content p {
            color: #666;
            font-size: 0.95rem;
        }
        
        .reminders-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid #4CAF50;
        }
        
        .reminders-section h3 {
            color: #2e7d32;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .reminder-item {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .reminder-text h4 {
            color: #333;
            margin-bottom: 5px;
            font-size: 1rem;
        }
        
        .reminder-text p {
            color: #666;
            font-size: 0.85rem;
        }
        
        .reminder-button {
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 15px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .reminder-button:hover {
            background: #388E3C;
        }
        
        .share-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }
        
        .share-title {
            color: #1a237e;
            font-size: 1.3rem;
            margin-bottom: 15px;
        }
        
        .share-description {
            color: #666;
            margin-bottom: 25px;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .btn-whatsapp {
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 20px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .btn-whatsapp:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
        }
        
        .btn-whatsapp.sent {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
        }
        
        .privacy-note {
            font-size: 0.85rem;
            color: #666;
            font-style: italic;
        }
        
        .emergency-section {
            background: #ffebee;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid #f44336;
            text-align: center;
        }
        
        .emergency-title {
            color: #d32f2f;
            font-size: 1.3rem;
            margin-bottom: 15px;
        }
        
        .btn-emergency {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 20px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.3);
        }
        
        .btn-emergency:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(244, 67, 54, 0.4);
        }
        
        .back-button {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: #f8f9fa;
            color: #666;
            border: 2px solid #dee2e6;
            border-radius: 50px;
            padding: 15px 30px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            text-decoration: none;
            margin-top: 20px;
        }
        
        .back-button:hover {
            background: #e9ecef;
            color: #1a237e;
        }
        
        .travel-time {
            font-size: 0.9rem;
            color: #666;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container passenger-container">
        <!-- ENCABEZADO -->
        <div class="passenger-header">
            <h1><i class="fas fa-user-shield"></i> SUBOSEGURO Pasajero</h1>
            <p>Tu viaje seguro est√° activo</p>
            <div class="status-badge"><i class="fas fa-check-circle"></i> TAXI VERIFICADO</div>
        </div>
        
        <!-- INFORMACI√ìN DEL CONDUCTOR -->
        <div class="info-card">
            <div class="info-item">
                <div class="info-icon"><i class="fas fa-user"></i></div>
                <div class="info-content">
                    <h4>Conductor Verificado</h4>
                    <p id="driver-name">Juan P√©rez Mart√≠nez</p>
                </div>
            </div>
            
            <div class="info-item">
                <div class="info-icon"><i class="fas fa-taxi"></i></div>
                <div class="info-content">
                    <h4>Veh√≠culo</h4>
                    <p id="vehicle-info">Toyota Corolla 2022 - ABC-123</p>
                </div>
            </div>
            
            <div class="info-item">
                <div class="info-icon"><i class="fas fa-building"></i></div>
                <div class="info-content">
                    <h4>Empresa</h4>
                    <p id="company-info">Taxi Seguro S.A.</p>
                </div>
            </div>
            
            <div class="info-item">
                <div class="info-icon"><i class="fas fa-phone"></i></div>
                <div class="info-content">
                    <h4>Contacto</h4>
                    <p id="contact-info">+502 1234-5678</p>
                </div>
            </div>
        </div>
        
        <!-- RECORDATORIOS DE SEGURIDAD -->
        <div class="reminders-section">
            <h3><i class="fas fa-clipboard-check"></i> Recordatorios de Seguridad</h3>
            
            <div class="reminder-item">
                <div class="reminder-text">
                    <h4>Revisi√≥n del Veh√≠culo</h4>
                    <p>Verifique ventanillas y portezuelas antes de iniciar</p>
                </div>
                <button class="reminder-button" onclick="playAudio('revision')">Escuchar</button>
            </div>
            
            <div class="reminder-item">
                <div class="reminder-text">
                    <h4>Objetos Personales</h4>
                    <p>Revise que no olvide nada en el veh√≠culo</p>
                </div>
                <button class="reminder-button" onclick="playAudio('objetos')">Escuchar</button>
            </div>
            
            <div class="reminder-item">
                <div class="reminder-text">
                    <h4>Viaje Seguro</h4>
                    <p>Su viaje est√° siendo monitoreado por seguridad</p>
                </div>
                <button class="reminder-button" onclick="playAudio('viaje')">Escuchar</button>
            </div>
        </div>
        
        <!-- COMPARTIR VIAJE -->
        <div class="share-section">
            <div class="share-title"><i class="fas fa-share-alt"></i> Compartir mi trayecto</div>
            <div class="share-description">
                Para que alguien de confianza siga tu viaje en tiempo real.
                <br><strong>Se incluir√°n los datos del conductor y veh√≠culo verificado.</strong>
            </div>
            
            <button class="btn-whatsapp" onclick="compartirViajeWhatsApp()">
                <span style="font-size: 24px;"><i class="fab fa-whatsapp"></i></span>
                COMPARTIR VIAJE POR WHATSAPP
            </button>
            
            <div class="privacy-note">
                <i class="fas fa-lock"></i> El conductor NO ser√° notificado de que compartiste esta informaci√≥n.
            </div>
            
            <div class="travel-time">
                <i class="fas fa-clock"></i> Inicio del viaje: <span id="travel-time">11:30 AM</span>
            </div>
        </div>
        
        <!-- BOT√ìN DE EMERGENCIA -->
        <div class="emergency-section">
            <div class="emergency-title"><i class="fas fa-exclamation-triangle"></i> Bot√≥n de Emergencia</div>
            <div style="color: #666; margin-bottom: 20px; font-size: 0.95rem;">
                Solo usar en caso de peligro real durante el viaje
            </div>
            <button class="btn-emergency" onclick="activarEmergencia()">
                <i class="fas fa-bell"></i> ACTIVAR EMERGENCIA
            </button>
        </div>
        
        <!-- VOLVER AL INICIO -->
        <a href="index.html" class="back-button">
            <i class="fas fa-arrow-left"></i> Volver al Inicio
        </a>
    </div>

    <!-- SCRIPT DE FUNCIONALIDAD -->
    <script>
    // DATOS DEL VIAJE (se cargar√≠an del QR escaneado)
    const datosViaje = {
        conductor: {
            nombre: "Juan P√©rez Mart√≠nez",
            telefono: "+502 1234-5678",
            licencia: "T-123456789"
        },
        vehiculo: {
            modelo: "Toyota Corolla 2022",
            placa: "ABC-123",
            color: "Blanco"
        },
        empresa: "Taxi Seguro S.A.",
        inicio: new Date().toISOString()
    };
    
    // INICIALIZAR P√ÅGINA
    document.addEventListener('DOMContentLoaded', function() {
        // Cargar datos en la interfaz
        document.getElementById('driver-name').textContent = datosViaje.conductor.nombre;
        document.getElementById('vehicle-info').textContent = 
            `${datosViaje.vehiculo.modelo} - ${datosViaje.vehiculo.placa}`;
        document.getElementById('company-info').textContent = datosViaje.empresa;
        document.getElementById('contact-info').textContent = datosViaje.conductor.telefono;
        
        // Actualizar hora de inicio
        const hora = new Date(datosViaje.inicio).toLocaleTimeString('es-GT', {
            hour: '2-digit',
            minute: '2-digit'
        });
        document.getElementById('travel-time').textContent = hora;
        
        console.log('üöï SUBOSEGURO - App Pasajero cargada');
        console.log('üìã Datos del viaje:', datosViaje);
    });
    
    // FUNCI√ìN PARA COMPARTIR POR WHATSAPP (MEJORADA)
    async function compartirViajeWhatsApp() {
        console.log('üì± Iniciando compartir por WhatsApp...');
        
        const btn = document.querySelector('.btn-whatsapp');
        const textoOriginal = btn.innerHTML;
        
        // Mostrar confirmaci√≥n
        const confirmar = confirm(`¬øCompartir informaci√≥n del viaje por WhatsApp?\n\n` +
            `üë§ CONDUCTOR: ${datosViaje.conductor.nombre}\n` +
            `üöï VEH√çCULO: ${datosViaje.vehiculo.modelo} (${datosViaje.vehiculo.placa})\n` +
            `üè¢ EMPRESA: ${datosViaje.empresa}\n` +
            `üìç UBICACI√ìN EN TIEMPO REAL\n` +
            `üîí MONITOREADO POR PNC\n\n` +
            `‚ö†Ô∏è El conductor NO ser√° notificado.`);
        
        if (!confirmar) {
            console.log('‚ùå Usuario cancel√≥');
            return;
        }
        
        // Cambiar bot√≥n a "cargando"
        btn.innerHTML = '<span style="font-size: 24px;"><i class="fas fa-spinner fa-spin"></i></span> OBTENIENDO UBICACI√ìN...';
        btn.disabled = true;
        
        try {
            // Obtener ubicaci√≥n actual
            const ubicacion = await obtenerUbicacion();
            const hora = new Date().toLocaleTimeString('es-GT');
            const fecha = new Date().toLocaleDateString('es-GT');
            
            // Crear mensaje para WhatsApp
            const mensaje = `üöó *VIAJE SEGURO - SUBOSEGURO*\n\n` +
                           `üë§ *Conductor:* ${datosViaje.conductor.nombre}\n` +
                           `üìû *Contacto:* ${datosViaje.conductor.telefono}\n` +
                           `üöï *Veh√≠culo:* ${datosViaje.vehiculo.modelo} (${datosViaje.vehiculo.placa})\n` +
                           `üè¢ *Empresa:* ${datosViaje.empresa}\n` +
                           `üìç *Mi ubicaci√≥n en vivo:*\n` +
                           `${ubicacion.enlace}\n\n` +
                           `‚è∞ *Inicio:* ${hora} - ${fecha}\n` +
                           `üîí *Monitoreado por:* PNC y ${datosViaje.empresa}\n\n` +
                           `#ViajeSeguro #SUBOSEGURO`;
            
            // Abrir WhatsApp
            const urlWhatsApp = `https://wa.me/?text=${encodeURIComponent(mensaje)}`;
            window.open(urlWhatsApp, '_blank');
            
            // Feedback visual
            btn.innerHTML = '<span style="font-size: 24px;"><i class="fas fa-check-circle"></i></span> ¬°COMPARTIDO!';
            btn.classList.add('sent');
            
            console.log('‚úÖ WhatsApp abierto con mensaje');
            console.log('üìù Mensaje:', mensaje);
            
            // Restaurar despu√©s de 3 segundos
            setTimeout(() => {
                btn.innerHTML = textoOriginal;
                btn.classList.remove
